<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
      <title>Installation</title>
    
      <link rel="stylesheet" href="../_static/pygments.css">
      <link rel="stylesheet" href="../_static/theme.css">
      <link rel="stylesheet" href="../_static/sphinx_press_theme.css">
      
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>

      <!-- sphinx script_files -->
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>

      
      <script src="../_static/theme-vendors.js"></script>
      <script src="../_static/theme.js" defer></script>
    
  <link rel="index" title="Index" href="../genindex.html" />
  <link rel="search" title="Search" href="../search.html" />
  <link rel="next" title="Introduction" href="introduction.html" />
  <link rel="prev" title="FAQ" href="faq.html" /> 
  </head>

  <body>
    <div id="app" class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="../index.html" class="home-link">
    
      <img class="logo" src="../_static/OpenColorIO_withText.svg" alt="doit logo"/>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">

  
    <div class="nav-item">
      <a href="_index.html#"
         class="nav-link  router-link-active">
         Overview
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../users/_index.html#user-guide"
         class="nav-link ">
         User Guide
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../configs/_index.html#public-configs"
         class="nav-link ">
         Configs
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../api/_index.html#api"
         class="nav-link ">
         API
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../contributors/_index.html#"
         class="nav-link ">
         Contributors
      </a>
    </div>
  



  
    <div class="nav-item">
      <a href="https://github.com/AcademySoftwareFoundation/OpenColorIO"
        class="nav-link external">
          Github <outboundlink/>
      </a>
    </div>
  

    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            

  
    <div class="nav-item">
      <a href="_index.html#"
         class="nav-link  router-link-active">
         Overview
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../users/_index.html#user-guide"
         class="nav-link ">
         User Guide
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../configs/_index.html#public-configs"
         class="nav-link ">
         Configs
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../api/_index.html#api"
         class="nav-link ">
         API
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../contributors/_index.html#"
         class="nav-link ">
         Contributors
      </a>
    </div>
  



  
    <div class="nav-item">
      <a href="https://github.com/AcademySoftwareFoundation/OpenColorIO"
        class="nav-link external">
          Github <outboundlink/>
      </a>
    </div>
  

            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="../search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="_index.html#">Overview</a></span>
      </p>
      <ul class="current">
        
          <li class="toctree-l1 "><a href="compatible_software.html" class="reference internal ">Compatible Software</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="downloads.html" class="reference internal ">Downloads</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="faq.html" class="reference internal ">FAQ</a>

            
          </li>

        
          <li class="toctree-l1 current"><a href="#" class="reference internal current">Installation</a>

            
              <ul>
                
                  <li class="toctree-l2"><a href="#the-easy-way" class="reference internal">The easy way</a></li>
                
                  <li class="toctree-l2"><a href="#building-from-source" class="reference internal">Building from source</a></li>
                
                  <li class="toctree-l2"><a href="#dependencies" class="reference internal">Dependencies</a></li>
                
                  <li class="toctree-l2"><a href="#quick-environment-configuration" class="reference internal">Quick environment configuration</a></li>
                
                  <li class="toctree-l2"><a href="#nuke-configuration" class="reference internal">Nuke Configuration</a></li>
                
                  <li class="toctree-l2"><a href="#environment-variables" class="reference internal">Environment variables</a></li>
                
              </ul>
            
          </li>

        
          <li class="toctree-l1 "><a href="introduction.html" class="reference internal ">Introduction</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="license.html" class="reference internal ">License</a>

            
          </li>

        
      </ul>
    </div>
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../users/_index.html#user-guide">User Guide</a></span>
      </p>
      <ul class="">
        
          <li class="toctree-l1 "><a href="../users/tool_overview.html" class="reference internal ">Tool overview</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../users/baking_luts.html" class="reference internal ">Baking LUT’s</a>

            
          </li>

        
      </ul>
    </div>
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../configs/_index.html#public-configs">Configs</a></span>
      </p>
      <ul class="">
        
          <li class="toctree-l1 "><a href="../configs/spi_vfx.html" class="reference internal ">spi-vfx</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../configs/spi_anim.html" class="reference internal ">spi-anim</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../configs/nuke_default.html" class="reference internal ">nuke-default</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../configs/aces_1.0.3.html" class="reference internal ">aces_1.0.3</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../configs/allocation_vars.html" class="reference internal ">How to Configure ColorSpace Allocation</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../configs/config_syntax.html" class="reference internal ">Config syntax</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../configs/contexts.html" class="reference internal ">Contexts</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../configs/looks.html" class="reference internal ">Looks</a>

            
          </li>

        
      </ul>
    </div>
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../api/_index.html#api">API</a></span>
      </p>
      <ul class="">
        
          <li class="toctree-l1 "><a href="../api/change_log.html" class="reference internal ">ChangeLog</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../api/c_baker.html" class="reference internal ">Baker</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../api/c_context.html" class="reference internal ">Context</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../api/c_gpushadercreator.html" class="reference internal ">GpuShaderCreator</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../api/c_gpushaderdesc.html" class="reference internal ">GpuShaderDesc</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../api/c_imagedesc.html" class="reference internal ">ImageDesc</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../api/c_packedimagedesc.html" class="reference internal ">PackedImageDesc</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../api/c_planarimagedesc.html" class="reference internal ">PlanarImageDesc</a>

            
          </li>

        
      </ul>
    </div>
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../contributors/_index.html#">Contributors</a></span>
      </p>
      <ul class="">
        
          <li class="toctree-l1 "><a href="../contributors/getting_started.html" class="reference internal ">Getting started</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../contributors/coding_guidelines.html" class="reference internal ">Coding guidelines</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../contributors/documentation_guidelines.html" class="reference internal ">Documentation guidelines</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../contributors/internal_architecture.html" class="reference internal ">Internal Architecture Overview</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../contributors/issues.html" class="reference internal ">Issues</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../contributors/submitting_changes.html" class="reference internal ">Submitting Changes</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../contributors/usage_examples.html" class="reference internal ">Usage Examples</a>

            
          </li>

        
      </ul>
    </div>
  
</div>
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      <li><a href="_index.html">&lt;no title&gt;</a> &raquo;</li>
    
    <li>Installation</li>
  </ul>
  

  <ul class="page-nav">
  <li class="prev">
    <a href="faq.html"
       title="previous chapter">← FAQ</a>
  </li>
  <li class="next">
    <a href="introduction.html"
       title="next chapter">Introduction →</a>
  </li>
</ul>
  
</div>
<hr>
          <div class="content" role="main">
            
  <div class="section" id="installation">
<span id="id1"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-easy-way">
<h2>The easy way<a class="headerlink" href="#the-easy-way" title="Permalink to this headline">¶</a></h2>
<p>While prebuilt binaries are not yet available for all platforms, OCIO
is available via several platform’s package managers.</p>
<div class="section" id="fedora-and-rhel">
<h3>Fedora and RHEL<a class="headerlink" href="#fedora-and-rhel" title="Permalink to this headline">¶</a></h3>
<p>In Fedora Core 15 and above, the following command will install OpenColorIO:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">yum</span> <span class="n">install</span> <span class="n">OpenColorIO</span>
</pre></div>
</div>
<p>Providing you are using the <a class="reference external" href="http://fedoraproject.org/wiki/EPEL">Fedora EPEL repository</a> (see the <a class="reference external" href="http://fedoraproject.org/wiki/EPEL/FAQ#Using_EPEL">FAQ for instructions</a>), this same
command will work for RedHat Enterprise Linux 6 and higher (including
RHEL derivatives such as CentOS 6 and Scientific Linux 6)</p>
</div>
<div class="section" id="os-x-using-homebrew">
<h3>OS X using Homebrew<a class="headerlink" href="#os-x-using-homebrew" title="Permalink to this headline">¶</a></h3>
<p>You can use the Homebrew package manager to install OpenColorIO on OS X.</p>
<p>First install Homebrew as per the instructions on the <a class="reference external" href="http://mxcl.github.com/homebrew/">Homebrew
homepage</a> (or see the <a class="reference external" href="https://github.com/mxcl/homebrew/wiki/Installation">Homebrew wiki</a> for more
detailed instructions)</p>
<p>Then simply run the following command to install:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">brew</span> <span class="n">install</span> <span class="n">opencolorio</span>
</pre></div>
</div>
<p>To build with the Python library use this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">brew</span> <span class="n">install</span> <span class="n">opencolorio</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">python</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="building-from-source">
<span id="id2"></span><h2>Building from source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>The basic requirements for building OCIO are:</p>
<ul class="simple">
<li><p>cmake &gt;= 3.12</p></li>
<li><p>*Expat &gt;= 2.2.5 (XML parser for CDL/CLF/CTF)</p></li>
<li><p>*yaml-cpp &gt;= 0.6.3 (YAML parser for Configs)</p></li>
<li><p>*IlmBase (Half only) &gt;= 2.3.0 (for half domain LUTs)</p></li>
<li><p>*pystring &gt;= 1.1.3</p></li>
</ul>
<p>Some optional components also depend on:</p>
<ul class="simple">
<li><p>*Little CMS &gt;= 2.2 (for ociobakelut ICC profile baking)</p></li>
<li><p>*pybind11 &gt;= 2.4.3 (for the Python bindings)</p></li>
<li><dl class="simple">
<dt>Python &gt;= 2.7 (for the Python bindings and docs)</dt><dd><ul>
<li><p>*Sphinx &gt;= 1.8.5</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>OpenImageIO &gt;= 2.1.9 (for apps including ocioconvert)</p></li>
<li><p>Nuke 6.x or newer (for the Nuke nodes)</p></li>
</ul>
<div class="section" id="automated-installation">
<h3>Automated Installation<a class="headerlink" href="#automated-installation" title="Permalink to this headline">¶</a></h3>
<p>Listed dependencies with a preceeding * can be automatically installed at
build time by setting the <code class="docutils literal notranslate"><span class="pre">OCIO_INSTALL_EXT_PACKAGES</span></code> option in your cmake
command (requires an internet connection). C/C++ libraries are pulled from
external repositories, built, and statically-linked into libOpenColorIO. Python
packages are installed with <code class="docutils literal notranslate"><span class="pre">pip</span></code>. All installs are fully contained within
your build directory.</p>
<p>Three <code class="docutils literal notranslate"><span class="pre">OCIO_INSTALL_EXT_PACKAGES</span></code> options are available:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DOCIO_INSTALL_EXT_PACKAGES</span><span class="o">=&lt;</span><span class="n">NONE</span><span class="o">|</span><span class="n">MISSING</span><span class="o">|</span><span class="n">ALL</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code> (default): Use system installed packages. Fail if any are missing or
don’t meet minimum version requireements.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MISSING</span></code>: Prefer system installed packages. Install any that are not
found or don’t meet minimum version requireements.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALL</span></code>: Install all required packages, regardless of availability on the
current system.</p></li>
</ul>
</div>
<div class="section" id="existing-install-hints">
<h3>Existing Install Hints<a class="headerlink" href="#existing-install-hints" title="Permalink to this headline">¶</a></h3>
<p>When using existing system libraries, the following CMake variables can be
defined to hint at non-standard install locations and preference of shared
or static linking:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-DExpat_ROOT=&lt;path&gt;</span></code> (include and/or library root dir)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DExpat_STATIC_LIBRARY=ON</span></code> (prefer static lib)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Dyaml-cpp_ROOT=&lt;path&gt;</span></code> (include and/or library root dir)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Dyaml-cpp_STATIC_LIBRARY=ON</span></code> (prefer static lib)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DHalf_ROOT=&lt;path&gt;</span></code> (include and/or library root dir)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DHalf_STATIC_LIBRARY=ON</span></code> (prefer static lib)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Dpystring_ROOT=&lt;path&gt;</span></code> (include and/or library root dir)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Dpystring_STATIC_LIBRARY=ON</span></code> (prefer static lib)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Dlcms2_ROOT=&lt;path&gt;</span></code> (include and/or library root dir)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Dlcms2_STATIC_LIBRARY=ON</span></code> (prefer static lib)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-pybind11_ROOT=&lt;path&gt;</span></code> (include and/or library root dir)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DPython_EXECUTABLE=&lt;path&gt;</span></code> (Python executable)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DNUKE_INSTALL_PATH=&lt;path&gt;</span></code> (or use <code class="docutils literal notranslate"><span class="pre">NDK_PATH</span></code> environment variable)</p></li>
</ul>
<p>To hint at Python package locations, add paths to the <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>
environment variable prior to configuring the build.</p>
</div>
<div class="section" id="os-x-and-linux">
<span id="osx-and-linux"></span><h3>OS X and Linux<a class="headerlink" href="#os-x-and-linux" title="Permalink to this headline">¶</a></h3>
<p>While there is a huge range of possible setups, the following steps
should work on OS X and most Linux distros. To keep things simple, this guide
will use the following example paths - these will almost definitely be
different for you:</p>
<ul class="simple">
<li><p>source code: <code class="docutils literal notranslate"><span class="pre">/source/ocio</span></code></p></li>
<li><p>the temporary build location: <code class="docutils literal notranslate"><span class="pre">/tmp/ociobuild</span></code></p></li>
<li><p>the final install directory: <code class="docutils literal notranslate"><span class="pre">/software/ocio</span></code></p></li>
</ul>
<p>First make the build directory and cd to it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir /tmp/ociobuild
$ cd /tmp/ociobuild
</pre></div>
</div>
<p>Next step is to run cmake, which looks for things such as the
compiler’s required arguments, optional requirements like Python,
Nuke, OpenImageIO etc</p>
<p>As we want to install OCIO to a custom location (instead of the
default <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>), we will run cmake with
<code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code>.</p>
<p>Still in <code class="docutils literal notranslate"><span class="pre">/tmp/ociobuild</span></code>, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake -DCMAKE_INSTALL_PREFIX=/software/ocio /source/ocio
</pre></div>
</div>
<p>The last argument is the location of the OCIO source code (containing
the main CMakeLists.txt file). You should see something along the
lines of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Configuring</span> <span class="n">done</span>
<span class="o">--</span> <span class="n">Generating</span> <span class="n">done</span>
<span class="o">--</span> <span class="n">Build</span> <span class="n">files</span> <span class="n">have</span> <span class="n">been</span> <span class="n">written</span> <span class="n">to</span><span class="p">:</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ociobuild</span>
</pre></div>
</div>
<p>Next, build everything (with the <code class="docutils literal notranslate"><span class="pre">-j</span></code> flag to build using 8
threads):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make -j8
</pre></div>
</div>
<p>Starting with CMake 3.12, you can instead run a portable parallel build:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake --build . -j 8
</pre></div>
</div>
<p>This should complete in a few minutes. Finally, install the files into
the specified location:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make install
</pre></div>
</div>
<p>If nothing went wrong, <code class="docutils literal notranslate"><span class="pre">/software/ocio</span></code> should look something like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /software/ocio
$ ls
bin/     include/ lib/
$ ls bin/
ocio2icc    ociobakelut ociocheck
$ ls include/
OpenColorIO/   PyOpenColorIO/ pkgconfig/
$ ls lib/
libOpenColorIO.a      libOpenColorIO.dylib
</pre></div>
</div>
</div>
<div class="section" id="windows-build">
<span id="id3"></span><h3>Windows Build<a class="headerlink" href="#windows-build" title="Permalink to this headline">¶</a></h3>
<p>While build environments may vary between user, here is an example batch file
for compiling on Windows as provided by <a class="reference external" href="https://github.com/hodoulp">&#64;hodoulp</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>@echo off


REM Grab the repo name, default is ocio
set repo_name=ocio
if not %1.==. set repo_name=%1


REM Using cygwin to have Linux cool command line tools
set CYGWIN=nodosfilewarning

set CMAKE_PATH=D:\OpenSource\3rdParty\cmake-3.12.2
set GLUT_PATH=D:\OpenSource\3rdParty\freeglut-3.0.0-2
set GLEW_PATH=D:\OpenSource\3rdParty\glew-1.9.0
set PYTHON_PATH=C:\Python27

REM Add glut &amp; glew dependencies to have GPU unit tests
set PATH=%GLEW_PATH%\bin;%GLUT_PATH%\bin;D:\Tools\cygwin64\bin;%CMAKE_PATH%\bin;%PATH%

REM Add Ninja &amp; jom to speed-up command line build i.e. one is enough
set PATH=D:\OpenSource\3rdParty\ninja;D:\OpenSource\3rdParty\jom;%PYTHONPATH%;%PATH%

call &quot;C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\vcvarsall.bat&quot; x64
REM call &quot;C:\Program Files (x86)\Microsoft Visual Studio\2017\Professional\VC\Auxiliary\Build\vcvarsall.bat&quot; x64

set OCIO_PATH=D:\OpenSource\%repo_name%

D:

IF NOT EXIST %OCIO_PATH% (
echo %OCIO_PATH% does not exist
exit /b
)
cd %OCIO_PATH%


set CMAKE_BUILD_TYPE=Release

echo *******
echo *********************************************
echo ******* Building %OCIO_PATH%
echo **
echo **
set are_you_sure = Y
set /P are_you_sure=Build in %CMAKE_BUILD_TYPE% ([Y]/N)?
if not %are_you_sure%==Y set CMAKE_BUILD_TYPE=Debug


set BUILD_PATH=%OCIO_PATH%\build_rls
set COMPILED_THIRD_PARTY_HOME=D:/OpenSource/3rdParty/compiled-dist_rls
set OCIO_BUILD_PYTHON=1

if not %CMAKE_BUILD_TYPE%==Release (
set BUILD_PATH=%OCIO_PATH%\build_dbg
set COMPILED_THIRD_PARTY_HOME=D:/OpenSource/3rdParty/compiled-dist_dbg
set OCIO_BUILD_PYTHON=0
)

set INSTALL_PATH=%COMPILED_THIRD_PARTY_HOME%/OpenColorIO-2.0.0

IF NOT EXIST %BUILD_PATH% ( mkdir %BUILD_PATH% )
cd %BUILD_PATH%

echo **
echo **

REM cmake -G &quot;Visual Studio 14 2015 Win64&quot;
REM cmake -G &quot;Visual Studio 15 2017 Win64&quot;
REM cmake -G &quot;Ninja&quot;
cmake -G &quot;NMake Makefiles JOM&quot; ^
    -DCMAKE_BUILD_TYPE=%CMAKE_BUILD_TYPE% ^
    -DCMAKE_INSTALL_PREFIX=%INSTALL_PATH% ^
    -DBUILD_SHARED_LIBS=ON ^
    -DOCIO_BUILD_APPS=ON ^
    -DOCIO_BUILD_TESTS=ON ^
    -DOCIO_BUILD_GPU_TESTS=ON ^
    -DOCIO_BUILD_DOCS=OFF ^
    -DOCIO_USE_SSE=ON ^
    -DOCIO_WARNING_AS_ERROR=ON ^
    -DOCIO_BUILD_PYTHON=%OCIO_BUILD_PYTHON% ^
    -DPython_LIBRARY=%PYTHONPATH%\libs\python27.lib ^
    -DPython_INCLUDE_DIR=%PYTHONPATH%\include ^
    -DPython_EXECUTABLE=%PYTHONPATH%\python.exe ^
    -DOCIO_BUILD_JAVA=OFF ^
    -DCMAKE_PREFIX_PATH=%COMPILED_THIRD_PARTY_HOME%\OpenImageIO-1.9.0;%COMPILED_THIRD_PARTY_HOME%/ilmbase-2.2.0 ^
    %OCIO_PATH%

REM Add OCIO &amp; OIIO
set PATH=%BUILD_PATH%\src\OpenColorIO;%INSTALL_PATH%\bin;%COMPILED_THIRD_PARTY_HOME%\OpenImageIO-1.9.0\bin;%PATH%


REM Find the current branch
set GITBRANCH=
for /f %%I in (&#39;git.exe rev-parse --abbrev-ref HEAD 2^&gt; NUL&#39;) do set GITBRANCH=%%I

if not &quot;%GITBRANCH%&quot; == &quot;&quot;  prompt $C%GITBRANCH%$F $P$G

TITLE %repo_name% (%GITBRANCH%)

echo *******
echo *********************************************
if not &quot;%GITBRANCH%&quot; == &quot;&quot; echo branch  = %GITBRANCH%
echo *
echo Mode         = %CMAKE_BUILD_TYPE%
echo Build path   = %BUILD_PATH%
echo Install path = %INSTALL_PATH%
echo *
echo compile = jom all
echo test    = ctest -V
echo doc     = jom doc
echo install = jom install
echo *********************************************
echo *******
</pre></div>
</div>
<dl class="simple">
<dt>You could create a desktop shortcut with the following command:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">%comspec%</span> <span class="pre">/k</span> <span class="pre">&quot;C:\Users\hodoulp\ocio.bat&quot;</span> <span class="pre">ocio</span></code></p>
</dd>
</dl>
<p>Also look to the Appveyor config script at the root of repository for an example
build sequence.</p>
</div>
<div class="section" id="enabling-optional-components">
<span id="id4"></span><h3>Enabling optional components<a class="headerlink" href="#enabling-optional-components" title="Permalink to this headline">¶</a></h3>
<p>The OpenColorIO library is probably not all you want - the Python
libraries bindings, the Nuke nodes and several applications are only
built if their dependencies are found.</p>
<p>In the case of the Python bindings, the dependencies are the Python
headers for the version you wish to use. These may be picked up by
default - if so, when you run cmake you would see:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Python</span> <span class="mf">2.6</span> <span class="n">okay</span><span class="p">,</span> <span class="n">will</span> <span class="n">build</span> <span class="n">the</span> <span class="n">Python</span> <span class="n">bindings</span> <span class="n">against</span> <span class="o">.../</span><span class="n">include</span><span class="o">/</span><span class="n">python2</span><span class="o">.</span><span class="mi">6</span>
</pre></div>
</div>
<p>If not, you can point cmake to correct Python executable using the
<code class="docutils literal notranslate"><span class="pre">-D</span> <span class="pre">PYTHON=...</span></code> cmake flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake -D PYTHON=/my/custom/python2.6 /source/ocio
</pre></div>
</div>
<p>Same process with Nuke (although it less likely to be picked up
automatically). Point cmake to your Nuke install directory by adding
<code class="docutils literal notranslate"><span class="pre">-D</span> <span class="pre">NUKE_INSTALL_PATH</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cmake -D PYTHON=/my/custom/python2.6 -D NUKE_INSTALL_PATH=/Applications/Nuke6.2v1/Nuke6.2v1.app/Contents/MacOS/ /source/ocio
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">NUKE_INSTALL_PATH</span></code> directory should contain the Nuke executable
(e.g Nuke6.2v1), and a <code class="docutils literal notranslate"><span class="pre">include/</span></code> directory containing <code class="docutils literal notranslate"><span class="pre">DDImage/</span></code>
and others.</p>
<p>If set correctly, you will see something similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Found</span> <span class="n">Nuke</span><span class="p">:</span> <span class="o">/</span><span class="n">Applications</span><span class="o">/</span><span class="n">Nuke6</span><span class="o">.</span><span class="mi">2</span><span class="n">v1</span><span class="o">/</span><span class="n">Nuke6</span><span class="o">.</span><span class="mi">2</span><span class="n">v1</span><span class="o">.</span><span class="n">app</span><span class="o">/</span><span class="n">Contents</span><span class="o">/</span><span class="n">MacOS</span><span class="o">/</span><span class="n">include</span>
<span class="o">--</span> <span class="n">Nuke_API_VERSION</span><span class="p">:</span> <span class="o">--</span><span class="mf">6.2</span><span class="o">--</span>
</pre></div>
</div>
<p>The Nuke plugins are installed into <code class="docutils literal notranslate"><span class="pre">lib/nuke$MAJOR.$MINOR/</span></code>, e.g
<code class="docutils literal notranslate"><span class="pre">lib/nuke6.2/OCIODisdplay.so</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using the Nuke plugins, you should compile the Python
bindings for the same version of Python that Nuke uses
internally. For Nuke 6.0 and 6.1 this is Python 2.5, and for 6.2
it is Python 2.6</p>
</div>
<p>The applications included with OCIO have various dependencies - to
determine these, look at the CMake output when first run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Not</span> <span class="n">building</span> <span class="n">ocioconvert</span><span class="o">.</span> <span class="n">Requirement</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">found</span><span class="p">:</span> <span class="n">OIIO</span><span class="p">:</span><span class="n">FALSE</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="quick-environment-configuration">
<span id="quick-env-config"></span><h2>Quick environment configuration<a class="headerlink" href="#quick-environment-configuration" title="Permalink to this headline">¶</a></h2>
<p>The quickest way to set the required <a class="reference internal" href="../src/overview/installation.html#environment-setup"><span class="std std-ref">Environment variables</span></a> is to
source the <code class="docutils literal notranslate"><span class="pre">share/ocio/setup_ocio.sh</span></code> script installed with OCIO.</p>
<p>For a simple single-user setup, add the following to <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code>
(assuming you are using bash, and the example install directory of
<code class="docutils literal notranslate"><span class="pre">/software/ocio</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">/</span><span class="n">software</span><span class="o">/</span><span class="n">ocio</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">ocio</span><span class="o">/</span><span class="n">setup_ocio</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>The only environment variable you must configure manually is
<span class="target" id="index-0"></span><a class="reference internal" href="../src/overview/installation.html#envvar-OCIO"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">OCIO</span></code></a>, which points to the configuration file you wish to
use. For prebuilt config files, see the
<a class="reference internal" href="../src/overview/downloads.html#downloads"><span class="std std-ref">Downloads</span></a> section</p>
<p>To do this, you would add a line to <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> (or a per-project
configuration script etc), for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">OCIO</span><span class="o">=</span><span class="s2">&quot;/path/to/my/config.ocio&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="nuke-configuration">
<span id="id5"></span><h2>Nuke Configuration<a class="headerlink" href="#nuke-configuration" title="Permalink to this headline">¶</a></h2>
<p>If you specified the <code class="docutils literal notranslate"><span class="pre">NUKE_INSTALL_PATH</span></code> option when running cmake,
you should have a <code class="docutils literal notranslate"><span class="pre">/software/ocio/lib/nuke6.2</span></code> directory containing
various files.</p>
<p>If you have followed <a class="reference internal" href="../src/overview/installation.html#quick-env-config"><span class="std std-ref">Quick environment configuration</span></a>, the plugins should be
functional. However, one common additional configuration step is to
register an OCIODisplay node for each display device/view specified in
the config.</p>
<p>To do this, in a menu.py on <span class="target" id="index-1"></span><a class="reference internal" href="../src/overview/installation.html#envvar-NUKE_PATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">NUKE_PATH</span></code></a> (e.g
<code class="docutils literal notranslate"><span class="pre">~/.nuke/menu.py</span></code> for a single user setup), add the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ocionuke.viewer</span>
<span class="n">ocionuke</span><span class="o">.</span><span class="n">viewer</span><span class="o">.</span><span class="n">populate_viewer</span><span class="p">(</span><span class="n">also_remove</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">also_remove</span></code> argument can be set to either “default” to remove
the default sRGB/rec709 options, “all” to remove everything, or “none”
to leave existing viewer processes untouched.</p>
<p>Alternatively, if your workflow has different requirements, you can
copy the function and modify it as required, or use it as reference to
write your own, better viewer setup function!</p>
</div>
<div class="section" id="environment-variables">
<span id="environment-setup"></span><h2>Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h2>
<dl class="std envvar">
<dt id="envvar-OCIO">
<code class="sig-name descname">OCIO</code><a class="headerlink" href="#envvar-OCIO" title="Permalink to this definition">¶</a></dt>
<dd><p>This variable needs to point to the global OCIO config file, e.g
<code class="docutils literal notranslate"><span class="pre">config.ocio</span></code></p>
</dd></dl>

<dl class="std envvar">
<dt id="envvar-OCIO_LOGGING_LEVEL">
<code class="sig-name descname">OCIO_LOGGING_LEVEL</code><a class="headerlink" href="#envvar-OCIO_LOGGING_LEVEL" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures OCIO’s internal logging level. Valid values are
<code class="docutils literal notranslate"><span class="pre">none</span></code>, <code class="docutils literal notranslate"><span class="pre">warning</span></code>, <code class="docutils literal notranslate"><span class="pre">info</span></code>, or <code class="docutils literal notranslate"><span class="pre">debug</span></code> (or their respective
numeric values <code class="docutils literal notranslate"><span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">2</span></code>, or <code class="docutils literal notranslate"><span class="pre">3</span></code> can be used)</p>
<p>Logging output is sent to STDERR output.</p>
</dd></dl>

<dl class="std envvar">
<dt id="envvar-OCIO_ACTIVE_DISPLAYS">
<code class="sig-name descname">OCIO_ACTIVE_DISPLAYS</code><a class="headerlink" href="#envvar-OCIO_ACTIVE_DISPLAYS" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the <a class="reference internal" href="../src/configs/config_syntax.html#active-displays"><span class="std std-ref">active_displays</span></a> configuration value.
Colon-separated list of displays, e.g <code class="docutils literal notranslate"><span class="pre">sRGB:P3</span></code></p>
</dd></dl>

<dl class="std envvar">
<dt id="envvar-OCIO_ACTIVE_VIEWS">
<code class="sig-name descname">OCIO_ACTIVE_VIEWS</code><a class="headerlink" href="#envvar-OCIO_ACTIVE_VIEWS" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides the <a class="reference internal" href="../src/configs/config_syntax.html#active-views"><span class="std std-ref">active_views</span></a> configuration
item. Colon-separated list of view names, e.g
<code class="docutils literal notranslate"><span class="pre">internal:client:DI</span></code></p>
</dd></dl>

<dl class="std envvar">
<dt id="envvar-DYLD_LIBRARY_PATH">
<code class="sig-name descname">DYLD_LIBRARY_PATH</code><a class="headerlink" href="#envvar-DYLD_LIBRARY_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">lib/</span></code> folder (containing <code class="docutils literal notranslate"><span class="pre">libOpenColorIO.dylib</span></code>) must be
on the <code class="docutils literal notranslate"><span class="pre">DYLD_LIBRARY_PATH</span></code> search path, or you will get an error
similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dlopen</span><span class="p">(</span><span class="o">.../</span><span class="n">OCIOColorSpace</span><span class="o">.</span><span class="n">so</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span> <span class="n">Library</span> <span class="ow">not</span> <span class="n">loaded</span><span class="p">:</span> <span class="n">libOpenColorIO</span><span class="o">.</span><span class="n">dylib</span>
<span class="n">Referenced</span> <span class="n">from</span><span class="p">:</span> <span class="o">.../</span><span class="n">OCIOColorSpace</span><span class="o">.</span><span class="n">so</span>
<span class="n">Reason</span><span class="p">:</span> <span class="n">image</span> <span class="ow">not</span> <span class="n">found</span>
</pre></div>
</div>
<p>This applies to anything that links against OCIO, including the
Nuke nodes, and the <code class="docutils literal notranslate"><span class="pre">PyOpenColorIO</span></code> Python bindings.</p>
</dd></dl>

<dl class="std envvar">
<dt id="envvar-LD_LIBRARY_PATH">
<code class="sig-name descname">LD_LIBRARY_PATH</code><a class="headerlink" href="#envvar-LD_LIBRARY_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to the <code class="docutils literal notranslate"><span class="pre">DYLD_LIBRARY_PATH</span></code> on Linux</p>
</dd></dl>

<dl class="std envvar">
<dt id="envvar-PYTHONPATH">
<code class="sig-name descname">PYTHONPATH</code><a class="headerlink" href="#envvar-PYTHONPATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Python’s module search path. If you are using the PyOpenColorIO
module, you must add <code class="docutils literal notranslate"><span class="pre">lib/python2.x</span></code> to this search path (e.g
<code class="docutils literal notranslate"><span class="pre">python/2.5</span></code>), or importing the module will fail:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">PyOpenColorIO</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">ImportError</span>: <span class="n">No module named PyOpenColorIO</span>
</pre></div>
</div>
<p>Note that <span class="target" id="index-2"></span><a class="reference internal" href="../src/overview/installation.html#envvar-DYLD_LIBRARY_PATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">DYLD_LIBRARY_PATH</span></code></a> or <span class="target" id="index-3"></span><a class="reference internal" href="../src/overview/installation.html#envvar-LD_LIBRARY_PATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code></a>
must be set correctly for the module to work.</p>
</dd></dl>

<dl class="std envvar">
<dt id="envvar-NUKE_PATH">
<code class="sig-name descname">NUKE_PATH</code><a class="headerlink" href="#envvar-NUKE_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Nuke’s customization search path, where it will look for plugins,
gizmos, init.py and menu.py scripts and other customizations.</p>
<p>This should point to both <code class="docutils literal notranslate"><span class="pre">lib/nuke6.2/</span></code> (or whatever version
the plugins are built against), and <code class="docutils literal notranslate"><span class="pre">share/nuke/</span></code></p>
</dd></dl>

</div>
</div>


          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
  <li class="prev">
    <a href="faq.html"
       title="previous chapter">← FAQ</a>
  </li>
  <li class="next">
    <a href="introduction.html"
       title="next chapter">Introduction →</a>
  </li>
</ul><div class="footer" role="contentinfo">
      &#169; Copyright Contributors to the OpenColorIO Project.
    <br>
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.3 with <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a>.
</div>
            </div>
          </div>
      </page>
    </div>
    
    
  </body>
</html>